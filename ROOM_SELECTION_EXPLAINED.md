# üéÆ Comment les Chambres sont List√©es et Choisies

## üìä Vue d'ensemble du processus

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CATALOGUE COMPLET                             ‚îÇ
‚îÇ  15 chambres au total (d√©finies dans rooms/catalog.py)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   FILTRAGE INITIAL                               ‚îÇ
‚îÇ  Retire: Entrance Hall & Antechamber (d√©j√† plac√©es)            ‚îÇ
‚îÇ  R√©sultat: 13 chambres disponibles                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              FILTRAGE PAR DIRECTION OPPOS√âE                      ‚îÇ
‚îÇ  Si direction = NORTH ‚Üí garde chambres avec porte SOUTH         ‚îÇ
‚îÇ  Si direction = SOUTH ‚Üí garde chambres avec porte NORTH         ‚îÇ
‚îÇ  Si direction = EAST  ‚Üí garde chambres avec porte WEST          ‚îÇ
‚îÇ  Si direction = WEST  ‚Üí garde chambres avec porte EAST          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 S√âLECTION AL√âATOIRE                              ‚îÇ
‚îÇ  random.sample(chambres_compatibles, min(3, nombre_dispo))     ‚îÇ
‚îÇ  R√©sultat: 1, 2 ou 3 chambres propos√©es                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              CHOIX DU JOUEUR (1, 2 ou 3)                        ‚îÇ
‚îÇ  Le joueur s√©lectionne une chambre parmi les propos√©es         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              PLACEMENT SUR LA GRILLE                             ‚îÇ
‚îÇ  Position = position_actuelle + d√©calage_direction             ‚îÇ
‚îÇ  ‚Ä¢ NORTH: row - 1                                               ‚îÇ
‚îÇ  ‚Ä¢ SOUTH: row + 1                                               ‚îÇ
‚îÇ  ‚Ä¢ EAST:  col + 1                                               ‚îÇ
‚îÇ  ‚Ä¢ WEST:  col - 1                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üé≤ Est-ce AL√âATOIRE?

**OUI!** ‚úÖ La s√©lection est **totalement al√©atoire**

### Fonction utilis√©e:
```python
random.sample(compatible_rooms, num_to_select)
```

### Ce que cela signifie:
- √Ä chaque fois que vous appuyez sur **ESPACE**, de nouvelles chambres sont choisies
- **M√™me direction** ‚Üí **Chambres diff√©rentes** √† chaque fois
- Les chambres sont **m√©lang√©es al√©atoirement**
- Aucun pattern pr√©visible

### Exemple avec Direction NORTH:
```
Essai 1: Garage, Commissary, Courtyard
Essai 2: Observatory, Library, Chapel
Essai 3: Library, Rumpus Room, Music Room
```
‚Üí Toutes diff√©rentes!

## üìç O√ô sont plac√©es les chambres?

### Position de d√©part:
- **Entrance Hall**: Position (9, 2) - Derni√®re ligne, colonne 3
- **Antechamber**: Position (0, 2) - Premi√®re ligne, colonne 3

### Grille du manoir:
```
Largeur:  5 colonnes (0 √† 4)
Hauteur: 10 lignes    (0 √† 9)

     Col: 0    1    2    3    4
Row 0:   [ ]  [ ]  [A]  [ ]  [ ]    ‚Üê Antechamber (Objectif)
Row 1:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 2:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 3:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 4:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 5:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 6:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 7:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 8:   [ ]  [ ]  [ ]  [ ]  [ ]
Row 9:   [ ]  [ ]  [E]  [ ]  [ ]    ‚Üê Entrance Hall (D√©part)
```

### Calcul de la nouvelle position:
```python
# Code dans game1/game.py - M√©thode get_adjacent_position()

if direction == Direction.NORTH:
    new_row = current_row - 1  # Monte d'une ligne
    new_col = current_col       # M√™me colonne

elif direction == Direction.SOUTH:
    new_row = current_row + 1  # Descend d'une ligne
    new_col = current_col       # M√™me colonne

elif direction == Direction.EAST:
    new_row = current_row       # M√™me ligne
    new_col = current_col + 1  # Colonne suivante

elif direction == Direction.WEST:
    new_row = current_row       # M√™me ligne
    new_col = current_col - 1  # Colonne pr√©c√©dente
```

### Exemple:
```
Vous √™tes √† (9, 2) - Entrance Hall
Vous choisissez NORTH (W)
Nouvelle position = (9-1, 2) = (8, 2)
La chambre sera plac√©e en (8, 2)
```

## üîç Dans quel fichier/zone?

### üìÅ **game1/game.py**
```python
# LIGNE 65-115: S√©lection des chambres
def generate_room_selection(self):
    # 1. Obtenir toutes les chambres
    all_rooms = self.catalog.get_all_rooms()
    
    # 2. Filtrer
    available_rooms = [r for r in all_rooms 
                      if r.name not in ["Entrance Hall", "Antechamber"]]
    
    # 3. Filtrer par direction oppos√©e
    compatible_rooms = [r for r in available_rooms 
                       if opposite_direction in r.doors_directions]
    
    # 4. Choisir al√©atoirement
    self.pending_room_selection = random.sample(compatible_rooms, 
                                                 min(3, len(compatible_rooms)))

# LIGNE 117-150: Placement de la chambre
def select_room(self, index: int) -> bool:
    selected_room = self.pending_room_selection[index]
    
    # Calculer position
    new_pos = self.manor.get_adjacent_position(
        self.player.position, 
        self.selected_direction
    )
    
    # Placer la chambre
    self.manor.place_room(selected_room, *new_pos)
    
    # D√©placer le joueur
    self.player.position = new_pos
```

### üìÅ **game1/manor.py**
```python
# Calcul des positions adjacentes
def get_adjacent_position(self, position, direction):
    row, col = position
    
    if direction == Direction.NORTH:
        return (row - 1, col)
    elif direction == Direction.SOUTH:
        return (row + 1, col)
    # etc...
```

### üìÅ **rooms/catalog.py**
```python
# LIGNE 27-180: D√©finition de toutes les chambres
def _initialize_rooms(self):
    self.available_rooms.append(Room(
        name="Library",
        doors=[Direction.WEST, Direction.SOUTH],
        ...
    ))
    # ... 14 autres chambres
```

## üìä Statistiques des Portes

D'apr√®s le test:
- **Chambres avec porte NORTH**: 2 (Rumpus Room, Veranda)
- **Chambres avec porte SOUTH**: 13 (presque toutes!)
- **Chambres avec porte EAST**: 5
- **Chambres avec porte WEST**: 10

‚Üí Si vous allez vers le SOUTH, seulement **2 chambres** seront propos√©es!

## üéØ R√©sum√© Final

1. **Liste**: `catalog.get_all_rooms()` retourne toutes les chambres
2. **Filtre**: Retire Entrance & Antechamber + garde celles avec porte oppos√©e
3. **Al√©atoire**: `random.sample()` choisit 1-3 chambres
4. **Position**: Adjacente √† votre position selon la direction choisie
5. **Zone**: Code dans `game1/game.py` lignes 65-150

**C'est totalement al√©atoire et dynamique!** üé≤‚ú®
